- [summary](#summary)
- [1. homogenous coordinates](#1-homogenous-coordinates)
- [2. 2D transformations](#2-2d-transformations)
- [3. 变化可逆](#3-变化可逆)
- [4. 顺序](#4-顺序)
- [5. row/column major](#5-rowcolumn-major)


---


## summary

所以，为什么要用齐次坐标？
- 区分点和向量，点是1，向量是0
- 旋转、倾斜、缩放、翻折等可以用欧式坐标的矩阵乘法，但平移（及包含平移的K透射)需要用齐次坐标的矩阵乘法。

## 1. homogenous coordinates
- Affine map = linear map + translation 
$
\begin{bmatrix} x^{\prime}  \\y^{\prime}\end{bmatrix} = 
\begin{bmatrix}A & B \\C & D\end{bmatrix}
\begin{bmatrix}x \\y\end{bmatrix} +
\begin{bmatrix}t_x \\t_y\end{bmatrix}
$

- use homogenous coordinates
$
\begin{bmatrix} x^{\prime}  \\y^{\prime} \\1 \end{bmatrix} = 
\begin{bmatrix}A & B & t_x \\C & D & t_y \\0 & 0 & 1\end{bmatrix}
\begin{bmatrix}x \\y \\1\end{bmatrix}
$

- 
$\begin{bmatrix}
x^{\prime} \\
y^{\prime} \\
z^{\prime} \\
1
\end{bmatrix}
=\begin{bmatrix}
a & b & c & t_{x} \\
d & e & f & t_{y} \\
g & h & i & t_{z} \\
0 & 0 & 0 & 1
\end{bmatrix} 
\cdot\begin{bmatrix}
x \\
y \\
z \\
1
\end{bmatrix}$


Add a third coordinate (w-coordinate): 点升维加`1`，向量升维加`0`
- 2D point = $(x, y, 1)^T$
- 2D vector = $(x, y, 0)^T$
- 3D point = $(x, y, z, 1)^T$
- 3D vector = $(x, y, z, 0)^T$

![图 15](../../images/b59bfb201c73fd7b1acfa9592199bbca35a912fce7e6d29a500a04b674e95671.png)  


PS:
- $(x, y, \omega)^T$ is the 2D point $(x/\omega, y/\omega)^T$ $(\omega\neq0)$
- $(x, y, z, \omega)^T$ is the 3D point $(x/\omega, y/\omega, z/\omega)^T$ $(\omega\neq0)$


PS2:

![图 25](../../images/a947373697efa740f892bd6a23f4947f3c475ae4a3c87920dcde58a4192517dc.png)  

- 这是错的，表示相同的点不假，但是不是等号啊！
    $\begin{bmatrix} f_xX_c \\ f_yY_c \\ Z_c \end{bmatrix} 
=\begin{bmatrix} f_x\dfrac{X_{c}}{Z_{c}} \\ f_y\dfrac{Y_{c}}{Z_{c}} \\ 1 \end{bmatrix}$
- 这是齐次坐标到欧式坐标
    $\begin{bmatrix} f_xX_c \\ f_yY_c \\ Z_c \end{bmatrix} 
\to \begin{bmatrix} f_x\dfrac{X_{c}}{Z_{c}} \\ f_y\dfrac{Y_{c}}{Z_{c}} \\ 1 \end{bmatrix} \underrightarrow{当\omega=1时，可以直接转化} \begin{bmatrix} f_x\dfrac{X_{c}}{Z_{c}} \\ f_y\dfrac{Y_{c}}{Z_{c}} \end{bmatrix}$
- 这是齐次坐标的矩阵运算
    $\begin{bmatrix} f_xX_c \\ f_yY_c \\ Z_c \end{bmatrix} 
=Z_c\begin{bmatrix} f_x\dfrac{X_{c}}{Z_{c}} \\ f_y\dfrac{Y_{c}}{Z_{c}} \\ 1 \end{bmatrix}$

    $\begin{bmatrix} f_x\dfrac{X_{c}}{Z_{c}} \\ f_y\dfrac{Y_{c}}{Z_{c}} \\ 1 \end{bmatrix}
=\dfrac{1}{Z_c} \begin{bmatrix} f_xX_c \\ f_yY_c \\ Z_c \end{bmatrix} $

## 2. 2D transformations


![GAMES101_Lecture_03_28.png](../../images/GAMES101_Lecture_03_28.png)

- Shear
    $
    \begin{bmatrix} x^{\prime}  \\y^{\prime}\end{bmatrix} = 
    \begin{bmatrix}1 & a \\0 & 1\end{bmatrix}
    \begin{bmatrix}x \\y\end{bmatrix}
    $
    
    具体方法，代入点算
    ![图 9](../../images/d0a4f735771d6b5f7d68eab1e3cefc954363c1e2e4ed38d119a5bf11205cd204.png)  

    ![图 12](../../images/05bf99a20aad65445b1629796565da18a41cc0e4a805671a216352b0fa98dbb1.png)  

- Scale
    $
    \begin{bmatrix} x^{\prime}  \\y^{\prime}\end{bmatrix} = 
    \begin{bmatrix}s_{x} & 0 \\0 & s_{y}\end{bmatrix}
    \begin{bmatrix}x \\y\end{bmatrix}
    $
    ![图 10](../../images/13788ed6ef01eca25cb9c83db9c9b529095564496bfb35a71f0c8d347187f960.png)  


- Reflection（沿着y轴对称）
    $
    \begin{bmatrix} x^{\prime}  \\y^{\prime}\end{bmatrix} = 
    \begin{bmatrix}-1 & 0 \\0 & 1\end{bmatrix}
    \begin{bmatrix}x \\y\end{bmatrix}
    $
    ![图 11](../../images/b998939b80d59b7038f3135f810952191ec4bafe30ecb220c337ddb17943df58.png)  

- Rotate
    $
    \begin{bmatrix} x^{\prime}  \\y^{\prime}\end{bmatrix} = 
    \begin{bmatrix}\cos\theta & -\sin\theta \\\sin\theta & \cos\theta\end{bmatrix}
    \begin{bmatrix}x \\y\end{bmatrix}
    $
    ![图 13](../../images/1ec5610768a669b92985e6925cff8fc9abc3159b500f550ea6c3839a3b235246.png)  
    ![图 1](../../images/3dbda2dd7b29de7ec375c60c771701ef65a4124199c66ccaed20a86c7942c537.png)  

    ![图 2](../../images/d4574c8c28acc276d45c437b69ea51453490f6caf7618e7ae885b17a0ff244b6.png)  

    $\theta$ 代表的方向，positive rotation is counter-clockwise. 

- Translation
    ![图 14](../../images/effbc55ad1addae1c00e5bcbf3202c6546633bc26ffac758ffa0aeb9df3d1729.png)  

## 3. 变化可逆

![GAMES101_Lecture_03_29.png](../../images/GAMES101_Lecture_03_29.png)
## 4. 顺序
![GAMES101_Lecture_03_31.png](../../images/GAMES101_Lecture_03_31.png)
![GAMES101_Lecture_03_34.png](../../images/GAMES101_Lecture_03_34.png)
![GAMES101_Lecture_03_35.png](../../images/GAMES101_Lecture_03_35.png)
![GAMES101_Lecture_03_36.png](../../images/GAMES101_Lecture_03_36.png)


## 5. row/column major

1. tables about row-major & column-major



The differences between the two conventions are summarised in the following table:

|  Row-Major Vector (Mathematics)| Column-Major Vector (Mathematics) |
|:-:|:-:|
| Pre-multiplication | Post-multiplication |
| transforms order: $P^{\prime}=P*T_1*T_2*T_3$ |transforms order: $P^{\prime}=T_3*T_2*T_1*P$ |
|The rows of the matrix represent the bases (or axes) of a coordinate system (red: x-axis, green: y-axis, blue: z-axis)| The columns of the matrix represent the bases (or axes) of a coordinate system (red: x-axis, green: y-axis, blue: z-axis) |
| ${\begin{bmatrix} \color{red}{X0}& \color{red}{X1}&\color{red}{X2}&0\\ \color{green}{Y0}& \color{green}{Y1}&\color{green}{Y2}&0\\ \color{blue}{Z0}& \color{blue}{Z1}&\color{blue}{Z2}&0\\ X & Y &Z & 1 \end{bmatrix} } = \begin{bmatrix} \textbf{Row}_X & 0\\ \textbf{Row}_Y & 0\\ \textbf{Row}_Z & 0 \\ \textbf{Row}_t & 1\end{bmatrix}$ |${ \begin{bmatrix} \color{red}{X0}& \color{green}{Y0}&\color{blue}{Z0}&X\\ \color{red}{X1}& \color{green}{Y1}&\color{blue}{Z1}&Y\\ \color{red}{X2}& \color{green}{Y2}&\color{blue}{Z2}&Z\\0&0&0&1\end{bmatrix} } = \begin{bmatrix} \textbf{Col}_X & \textbf{Col}_Y & \textbf{Col}_Z & \textbf{Col}_t\\ 0 &0 & 0 & 1\end{bmatrix}$ |
|Transpose the matrix to use it as a column-major ordered matrix | Transpose the matrix to use it as a row-major ordered matrix |
|API: Direct X, Maya | API: OpenGL, Blender, PBRT|

For a Column-Major transform matrix, the first 3 columns are the +X, +Y, and +Z defining the camera orientation, and the X, Y, Z values define the origin.

1. $\sin \theta$ 
Note that the angle  is defined in radians. 360 degrees = $2\pi$
$\theta_{radians} = {\pi \over 180}\theta_{degrees}$
