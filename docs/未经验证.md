
# 未经验证
## extract mesh

<https://github.com/yenchenlin/nerf-pytorch/issues/31>: [extract_mesh.ipynb](https://github.com/zachfang/nerf-pytorch/blob/a315a3762678d6d4391447c090a9563248354eec/extract_mesh.ipynb) 


<https://github.com/yenchenlin/nerf-pytorch/issues/68>:
- [extract_mesh.ipynb](https://github.com/bmild/nerf/blob/master/extract_mesh.ipynb)
-   ```python
    NeRF = render_kwargs_test['network_fine']
    N, chunk = 256, 1024*64

    t = np.linspace(-1.2, 1.2, N + 1)
    query_points = np.stack(np.meshgrid(t, t, t), -1).astype(np.float32)
    print(query_points.shape)
    flat = torch.from_numpy(query_points.reshape([-1, 3])).to(device)

    query_fn = render_kwargs_test['network_query_fn']

    sigma = []
    for i in range(0, flat.shape[0], chunk):
        pts = flat[i:i+chunk,None,:]
        viwedirs = torch.zeros_like(flat[i:i+chunk])
        raw = query_fn(pts, viwedirs, NeRF)
        sigma.append(raw[...,-1])
    density = torch.concat(sigma,dim=0).detach().cpu().numpy().squeeze()
    plt.hist(np.maximum(0, density), log=True)
    plt.savefig('density.png')

    import mcubes
    import trimesh
    threshold = 50.



    vertices, triangles = mcubes.marching_cubes(density.reshape(257,257,-1), threshold)
    print('done', vertices.shape, triangles.shape)
    mesh = trimesh.Trimesh(vertices, triangles)
    mesh.export('000.ply')
    ```

## Help obtaining .json files from blender objects

<https://github.com/yenchenlin/nerf-pytorch/issues/16>